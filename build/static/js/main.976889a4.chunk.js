(this["webpackJsonpnft-marketplace"]=this["webpackJsonpnft-marketplace"]||[]).push([[0],{100:function(e,t,n){"use strict";t.a={contractAddress:"KT1NeQyyurXAv8pMyL3w57QZZEyKnHVJHwaq",tokenAddress:"KT19ZS9VhwcAYHCodWaNgws42VVHGTsXSZFU"}},186:function(e,t){},283:function(e,t){},285:function(e,t){},307:function(e,t){},312:function(e,t){},314:function(e,t){},325:function(e,t){},327:function(e,t){},337:function(e,t){},338:function(e,t){},376:function(e,t){},378:function(e,t){},383:function(e,t){},385:function(e,t){},397:function(e,t){},400:function(e,t){},491:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n(110),r=n.n(a),s=n(0),i=n(3),l=n(18),o=n(11),u=n(39),d=n(99),j=n(53),b=n(8),h=function(e){var t=e.Tezos,n=e.wallet,c=e.setTezos,a=Object(u.c)((function(e){return e.walletConfig.user})),r=Object(u.b)(),s=function(e){e.preventDefault(),""===a.userAddress?r(Object(j.c)({Tezos:t,wallet:n})):r(Object(j.d)({wallet:n,setTezos:c}))};return Object(b.jsxs)("div",{className:"ui menu black",style:{marginTop:"5px"},children:[Object(b.jsx)("a",{href:"/#",className:"ui header item",children:"NFTs"}),Object(b.jsx)(d.b,{className:"item",to:"/",children:"Home"}),""!==a.userAddress?Object(b.jsx)(d.b,{className:"item",to:"/create",children:"Create NFT"}):null,Object(b.jsx)("div",{className:"right menu",children:""===a.userAddress?Object(b.jsx)("a",{href:"/#",className:"item",onClick:s,children:"Connect Wallet"}):Object(b.jsx)("a",{href:"/#",className:"item",onClick:s,children:"Disconnect Wallet"})})]})},O=n(73),m=n(263),f=n(17),p=n(21),x=function(e){var t=e.item,n=e.onClick,c=e.onCollect;return Object(b.jsxs)("div",{className:"ui fluid card",children:[Object(b.jsx)("div",{className:"image",children:Object(b.jsx)("img",{onClick:n,style:{maxHeight:"200px",objectFit:"cover"},src:"https://ipfs.io/ipfs/".concat(t.image.split("ipfs://")[1]),alt:t.description})}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("div",{className:"right floated",children:["Price:",Object(b.jsx)("div",{style:{color:"black"},children:t.amount})]}),Object(b.jsx)("div",{className:"header",children:t.name}),Object(b.jsx)("div",{className:"meta",children:t.symbol}),Object(b.jsx)("div",{className:"description",children:t.description.length>15?t.description.slice(0,15)+"...":t.description})]}),Object(b.jsxs)("div",{className:"extra content",children:[Object(b.jsx)("span",{className:"right floated",children:Object(b.jsx)("button",{className:"ui basic button",onClick:c,children:t.collectable?"Buy":"Sold Out"})}),Object(b.jsxs)("span",{children:["Token ID:",Object(b.jsx)("div",{style:{color:"black"},children:t.token_id})]})]})]})},v=function(e){var t=e.Tezos,n=Object(u.c)((function(e){return e.tokenData})),c=Object(u.b)(),a=Object(p.f)(),r=n.map((function(e,n){return Object(b.jsx)(x,{item:e,onCollect:function(){return c(Object(j.b)({Tezos:t,amount:e.amount,id:e.token_id}))},onClick:function(){return e.collectable&&a.push("/show/".concat(e.token_id))}},n)}));return Object(b.jsx)("div",{className:"ui link three column grid cards",children:r})},N=n(268),g=n(154),T=new g.b({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDY0NmFmRGIyMjhhMGY1RjFhMURDNDQyMjFCQ0E4YTIwNTNlNWUzQzIiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYyNDY0NjcyNjUwMiwibmFtZSI6IlRleiBCeXRlcyJ9.JfjY624-uOXE9naYfN7Z8QfY1bbO_bZcVihhHL5ke3I"}),k=function(e){var t=e.Tezos,n=Object(u.b)(),a=Object(N.a)({accept:[".png",".jpg",".jpeg",".gif"],multiple:!1,readAs:"ArrayBuffer"}),r=Object(o.a)(a,2),i=r[0],d=r[1].filesContent,h=Object(c.useState)(""),O=Object(o.a)(h,2),m=O[0],f=O[1],p=Object(c.useState)(""),x=Object(o.a)(p,2),v=x[0],k=x[1],y=Object(c.useState)(""),w=Object(o.a)(y,2),C=w[0],A=w[1],z=Object(c.useState)("0"),S=Object(o.a)(z,2),I=S[0],E=S[1],_=Object(c.useState)(""),D=Object(o.a)(_,2),H=D[0],L=D[1],R=Object(c.useState)(!1),W=Object(o.a)(R,2),Z=W[0],J=W[1];return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{className:"ui form error",children:[Object(b.jsxs)("div",{className:"field required ".concat(Z?"disabled":""),children:[Object(b.jsx)("label",{children:"Token Name"}),Object(b.jsx)("input",{type:"text",value:m,onChange:function(e){return f(e.target.value)},placeholder:"Tez Bytes"})]}),m.length>30?Object(b.jsxs)("div",{className:"ui error message",children:[Object(b.jsx)("div",{className:"header",children:"Too long!"}),Object(b.jsx)("p",{children:"The name must be less than 30 letters."})]}):null,Object(b.jsxs)("div",{className:"field required ".concat(Z?"disabled":""),children:[Object(b.jsx)("label",{children:"Description"}),Object(b.jsx)("input",{type:"text",value:v,onChange:function(e){return k(e.target.value)},placeholder:"A digital art piece!"})]}),v.length>300?Object(b.jsxs)("div",{className:"ui error message",children:[Object(b.jsx)("div",{className:"header",children:"Too long!"}),Object(b.jsx)("p",{children:"The Description must be less than 300 letters."})]}):null,Object(b.jsxs)("div",{className:"field required ".concat(Z?"disabled":""),children:[Object(b.jsx)("label",{children:"Symbol"}),Object(b.jsx)("input",{type:"text",value:C,onChange:function(e){return A(e.target.value)},placeholder:"TBY"})]}),Symbol.length>10?Object(b.jsxs)("div",{className:"ui error message",children:[Object(b.jsx)("div",{className:"header",children:"Too long!"}),Object(b.jsx)("p",{children:"The Symbol must be less than 10 letters."})]}):null,Object(b.jsxs)("div",{className:"field required ".concat(Z?"disabled":""),children:[Object(b.jsx)("label",{children:"Selling Amount (Mutez) (There is a 3% service fee)"}),Object(b.jsx)("input",{type:"text",value:I,onChange:function(e){return E(e.target.value)},placeholder:"Amount"})]}),/^-?\d+$/.test(I)||""===I?null:Object(b.jsxs)("div",{className:"ui error message",children:[Object(b.jsx)("div",{className:"header",children:"Only number allowed"}),Object(b.jsx)("p",{children:"The amount must be a valid Mutez value."})]}),Object(b.jsxs)("div",{className:"field required ".concat(Z?"disabled":""),children:[Object(b.jsx)("label",{children:"Image"}),Object(b.jsxs)("button",{type:"button",className:"ui basic button",onClick:function(e){i(),e.preventDefault()},children:["Select files"," "]}),d.length>0?d[0].name:""]}),H?Object(b.jsxs)("div",{className:"ui error message",children:[Object(b.jsx)("div",{className:"header",children:"Error"}),Object(b.jsx)("p",{children:H})]}):null,Object(b.jsx)("button",{className:"ui button ".concat(Z?"loading":""),onClick:function(e){return function(e){e.preventDefault(),""!==m&&""!==v&&""!==C&&""!==I&&/^-?\d+$/.test(I)&&0!==d.length?(J(!0),L(""),Object(l.a)(Object(s.a)().mark((function e(){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.store({name:m,description:v,decimals:0,symbol:C,image:new g.a([d[0].content],d[0].name,{type:"image/"+d[0].name.split(".")[1]})});case 2:c=e.sent,console.log(c),n(Object(j.f)({Tezos:t,amount:I,metadata:c.url})),J(!1),f(""),E("0"),k(""),A("");case 10:case"end":return e.stop()}}),e)})))()):L("Some Error Occurred. Please check entered details.")}(e)},type:"submit",children:"Mint"})]})})},y=function(e){var t,n,a=e.Tezos,r=Object(u.c)((function(e){return e.tokenData})),s=Object(u.b)(),i=Object(p.g)().id,l=Object(c.useState)(null),d=Object(o.a)(l,2),h=d[0],O=d[1];return Object(c.useEffect)((function(){var e=r[parseInt(i)];e&&O(e)}),[r,i]),Object(b.jsx)("div",{className:"ui internally celled grid",children:null!==h?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"ui",children:h.description}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"nine wide column",children:Object(b.jsx)("img",{src:"https://ipfs.io/ipfs/".concat(h.image.split("ipfs://")[1]),alt:h.description})}),Object(b.jsxs)("div",{className:"seven wide column container center",children:[Object(b.jsxs)("div",{className:"ui",children:[Object(b.jsx)("h3",{className:"ui right floated header",children:h.name}),Object(b.jsx)("h3",{className:"ui left aligned header",children:"Name"})]}),Object(b.jsxs)("div",{className:"ui",children:[Object(b.jsx)("h3",{className:"ui right floated header",children:h.symbol}),Object(b.jsx)("h3",{className:"ui left aligned header",children:"Symbol"})]}),Object(b.jsxs)("div",{className:"ui ",onClick:function(){navigator.clipboard.writeText(h.holder+"")},children:[Object(b.jsx)("h3",{className:"ui right floated header green",style:{cursor:"pointer"},"data-content":"Copy to clipboard",children:(null===(t=h.holder)||void 0===t?void 0:t.slice(0,6))+"..."}),Object(b.jsx)("h3",{className:"ui left aligned header",children:"Holder"})]}),Object(b.jsxs)("div",{className:"ui ",onClick:function(){navigator.clipboard.writeText(h.author+"")},children:[Object(b.jsx)("h3",{className:"ui right floated header green",style:{cursor:"pointer"},"data-content":"Copy to clipboard",children:(null===(n=h.author)||void 0===n?void 0:n.slice(0,6))+"..."}),Object(b.jsx)("h3",{className:"ui left aligned header",children:"Author"})]}),Object(b.jsxs)("div",{className:"ui",children:[Object(b.jsx)("h3",{className:"ui right floated header",children:h.amount}),Object(b.jsx)("h3",{className:"ui left aligned header",children:"Price"})]}),Object(b.jsxs)("div",{className:"ui",children:[Object(b.jsx)("h3",{className:"ui right floated header",children:h.token_id}),Object(b.jsx)("h3",{className:"ui left aligned header",children:"Token ID"})]}),Object(b.jsx)("div",{className:"ui",children:Object(b.jsx)("button",{className:"fluid ui button basic green",onClick:function(){return h.collectable&&s(Object(j.b)({Tezos:a,amount:h.amount,id:h.token_id}))},children:h.collectable?"Buy":"Sold Out"})})]})]})]}):null})},w=function(){var e=Object(u.b)(),t=Object(c.useState)(new O.a("https://hangzhounet.smartpy.io/")),n=Object(o.a)(t,2),a=n[0],r=n[1],d=Object(c.useState)(null),x=Object(o.a)(d,2),N=x[0],g=x[1];return Object(c.useEffect)((function(){Object(l.a)(Object(s.a)().mark((function t(){var n,c,r,l;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=new m.a({name:"NFT marketplace",preferredNetwork:f.q.HANGZHOUNET,colorMode:f.j.LIGHT,disableDefaultEvents:!1,eventHandlers:(n={},Object(i.a)(n,f.e.PAIR_INIT,{handler:f.L.PAIR_INIT}),Object(i.a)(n,f.e.PAIR_SUCCESS,{handler:function(e){return e.publicKey}}),n)}),a.setWalletProvider(c),t.next=4,c.client.getActiveAccount();case 4:if(!t.sent){t.next=13;break}return t.next=8,c.getPKH();case 8:return r=t.sent,t.next=11,a.tz.getBalance(r);case 11:l=t.sent,e(Object(j.a)({userAddress:r,balance:l.toNumber()}));case 13:g(c);case 14:case"end":return t.stop()}}),t)})))()}),[a,e]),Object(c.useEffect)((function(){e(Object(j.e)())}),[a,e]),Object(b.jsxs)("div",{className:"ui container",children:[Object(b.jsx)(h,{Tezos:a,setTezos:r,wallet:N}),Object(b.jsx)("div",{className:"ui container",children:Object(b.jsxs)(p.c,{children:[Object(b.jsx)(p.a,{path:"/create",children:Object(b.jsx)(k,{Tezos:a})}),Object(b.jsx)(p.a,{path:"/show/:id",children:Object(b.jsx)(y,{Tezos:a})}),Object(b.jsx)(p.a,{path:"/",children:Object(b.jsx)(v,{Tezos:a})})]})})]})},C=n(62),A=n(266),z=n(116),S=n(265),I=n(31),E=n(153),_=n.n(E),D={key:"root",storage:_.a},H={user:{userAddress:"",userBalance:0}},L=Object(C.b)({walletConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_WALLET":return Object(I.a)(Object(I.a)({},e),{},{user:t.user});case"DISCONNECT_WALLET":return _.a.removeItem("persist:root"),Object(I.a)({},H);case"TEZOS_INSTANCE":return Object(I.a)({},e);default:return e}},tokenData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_TOKEN_DATA"===t.type?t.payload:e}}),R=Object(z.a)(D,L),W=Object(C.c)(R,Object(C.a)(A.a));r.a.render(Object(b.jsx)(u.a,{store:W,children:Object(b.jsx)(S.a,{loading:null,persistor:Object(z.b)(W),children:Object(b.jsx)(d.a,{children:Object(b.jsx)(w,{})})})}),document.querySelector("#root"))},53:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return f}));var c=n(31),a=n(0),r=n(18),s=n(73),i=n(17),l=n(100),o=n(117),u=n.n(o),d=function(e){var t=e.wallet,n=e.Tezos;return function(){var e=Object(r.a)(Object(a.a)().mark((function e(c){var r,s,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},n.setWalletProvider(t),e.next=5,t.client.getActiveAccount();case 5:if(e.sent){e.next=9;break}return e.next=9,t.requestPermissions({network:{type:i.q.HANGZHOUNET,rpcUrl:"https://hangzhounet.smartpy.io/"}});case 9:return e.next=11,t.getPKH();case 11:return s=e.sent,e.next=14,n.tz.getBalance(s);case 14:l=e.sent,r.user={userAddress:s,balance:l.toNumber()},c(j(r.user)),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),c({type:"CONNECT_WALLET_ERROR"});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return{type:"CONNECT_WALLET",user:e}},b=function(e){var t=e.wallet,n=e.setTezos;return function(){var e=Object(r.a)(Object(a.a)().mark((function e(c){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(new s.a("https://hangzhounet.smartpy.io/")),c({type:"DISCONNECT_WALLET"}),!t){e.next=9;break}return e.next=5,t.client.removeAllAccounts();case 5:return e.next=7,t.client.removeAllPeers();case 7:return e.next=9,t.client.destroy();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function h(t){return e.from(function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map((function(e){return parseInt(e,16)})))}(t)).toString("utf8")}var O=function(){return function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,r,s,i,o,d,j,b,O,m;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("https://api.hangzhou2net.tzkt.io/v1/contracts/".concat(l.a.contractAddress,"/bigmaps/data/keys"));case 3:return n=e.sent,e.next=6,u.a.get("https://api.hangzhou2net.tzkt.io/v1/contracts/".concat(l.a.tokenAddress,"/bigmaps/token_metadata/keys"));case 6:r=e.sent,s=n.data,i=r.data,o=[],d=0;case 11:if(!(d<s.length)){e.next=22;break}return j=h(i[d].value.token_info[""]).split("//").at(-1),e.next=15,u.a.get("https://ipfs.io/ipfs/"+j);case 15:b=e.sent,O=s[d].value,m=b.data,o[d]=Object(c.a)(Object(c.a)(Object(c.a)({},O),m),{},{token_id:i[d].value.token_id});case 19:d++,e.next=11;break;case 22:console.log(o),t({type:"SET_TOKEN_DATA",payload:o}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.Tezos,n=e.amount,c=e.metadata;return function(){var e=Object(r.a)(Object(a.a)().mark((function e(r){var s,i,o,u;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wallet.at(l.a.contractAddress);case 3:for(s=e.sent,i="",o=0;o<c.length;o++)i+=c.charCodeAt(o).toString(16).slice(-4);return e.next=8,s.methods.mint(n,i).send();case 8:return u=e.sent,e.next=11,u.confirmation();case 11:r(O()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.Tezos,n=e.amount,c=e.id;return function(){var e=Object(r.a)(Object(a.a)().mark((function e(r){var s,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wallet.at(l.a.contractAddress);case 3:return s=e.sent,e.next=6,s.methods.collect(c).send({mutez:!0,amount:n});case 6:return i=e.sent,e.next=9,i.confirmation();case 9:r(O()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}}).call(this,n(14).Buffer)}},[[491,1,2]]]);
//# sourceMappingURL=main.976889a4.chunk.js.map